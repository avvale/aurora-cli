version: 0.0.1
boundedContextName: iam
moduleName: role
moduleNames: roles
aggregateName: IamRole
hasOAuth: true
hasTenant: false
hasAuditing: true
front:
  solidIcon: mat_solid:groups
  outlineIcon: mat_outline:groups
aggregateProperties:
  - name: id
    type: id
    primaryKey: true
    nullable: false
  - name: rowId
    type: bigint
    index: unique
    autoIncrement: true
    nullable: false
  - name: name
    description: The name of the role
    type: varchar
    maxLength: 128
    nullable: false
  - name: defaultRedirection
    description: The default redirection URL for the role, after login will be redirected to this URL
    type: varchar
    maxLength: 2046
    nullable: true
  - name: hasHiddenVerticalNavigation
    description: Indicates if vertical navigation should be hidden
    type: boolean
    nullable: true
    defaultValue: false
    example: true
  - name: isMaster
    description: Indicates if the role is created by default and cannot be deleted
    type: boolean
    nullable: false
    defaultValue: false
    example: false
  - name: permissions
    description: The permissions that belong to the role
    type: relationship
    nullable: true
    webComponent:
      type: grid-select-multiple-elements
    relationship:
      type: many-to-many
      singularName: permission
      aggregateName: IamPermission
      modulePath: iam/permission
      avoidConstraint: false
      pivot:
        boundedContextName: iam
        moduleName: permission-role
        moduleNames: permissions-roles
        aggregateName: IamPermissionRole
        hasOAuth: true
        hasAuditing: true
        aggregateProperties:
          - name: permissionId
            type: id
            primaryKey: true
            nullable: false
            relationship:
              type: many-to-one
              aggregateName: IamPermission
              modulePath: iam/permission
              field: permission
              avoidConstraint: true
          - name: roleId
            type: id
            primaryKey: true
            nullable: false
            relationship:
              type: many-to-one
              aggregateName: IamRole
              modulePath: iam/role
              field: role
              avoidConstraint: true
        excludedOperations:
          - count
          - getRaw
          - max
          - min
          - rawSql
          - sum
          - updateAndIncrement
          - upsert
  - name: accounts
    description: The accounts that belong to the role
    type: relationship
    nullable: true
    relationship:
      type: many-to-many
      singularName: account
      aggregateName: IamAccount
      modulePath: iam/account
      avoidConstraint: false
      pivot:
        boundedContextName: iam
        moduleName: role-account
        moduleNames: roles-accounts
        aggregateName: IamRoleAccount
        hasOAuth: true
        hasAuditing: true
        aggregateProperties:
          - name: roleId
            type: id
            primaryKey: true
            nullable: false
            relationship:
              type: many-to-one
              aggregateName: IamRole
              modulePath: iam/role
              field: role
              avoidConstraint: true
          - name: accountId
            type: id
            primaryKey: true
            nullable: false
            relationship:
              type: many-to-one
              aggregateName: IamAccount
              modulePath: iam/account
              field: account
              avoidConstraint: true
        excludedOperations:
          - count
          - getRaw
          - max
          - min
          - rawSql
          - sum
          - updateAndIncrement
          - upsert
  - name: createdAt
    description: The timestamp when the role was created
    type: timestamp
    nullable: true
  - name: updatedAt
    description: The timestamp when the role was last updated
    type: timestamp
    nullable: true
  - name: deletedAt
    description: The timestamp when the role was deleted
    type: timestamp
    nullable: true
additionalApis:
  - path: iam/role/inherit-permissions-role
    resolverType: mutation
    httpMethod: post
excludedOperations:
  - count
  - getRaw
  - max
  - min
  - rawSql
  - sum
  - updateAndIncrement
  - upsert
