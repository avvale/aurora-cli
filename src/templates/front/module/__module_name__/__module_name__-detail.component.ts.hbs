{{
    setVar 'importsArray' (
        array
            (object items=(array 'ChangeDetectionStrategy' 'Component' 'ViewEncapsulation') path='@angular/core')
            (object items='Validators' path='@angular/forms')
            (object items=(array 'Action' 'Crumb' 'defaultDetailImports' 'log' 'mapActions' 'SnackBarInvalidFormComponent' 'uuid' 'ViewDetailComponent') path='@aurora')
            (object items=(array 'lastValueFrom' 'takeUntil') path='rxjs')
            (object items=schema.aggregateName path=(sumStrings config.appsContainer '/' toKebabCase schema.boundedContextName '/' toKebabCase schema.boundedContextName '.types'))
            (object items=(sumStrings (toPascalCase schema.moduleName) 'Service') path=(sumStrings config.appsContainer '/' toKebabCase schema.boundedContextName '/' toKebabCase schema.moduleName))
    )
~}}
{{#if (hasI18nProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items=(array 'CoreCurrentLangService' 'CoreLang' 'FlagLangComponent') path='@aurora')
~}}
{{/if}}
{{#unlessEq (countWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push importsArray
        (object items='Observable' path='rxjs')
~}}
{{#unlessEq (countGridSelectElementWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push importsArray
        (object items='ViewChild' path='@angular/core')
~}}
{{
    push importsArray
        (
            object
                items=(array 'ColumnConfig' 'ColumnDataType' 'exportRows' 'GridColumnsConfigStorageService' 'GridData' 'GridFiltersStorageService' 'GridSelectElementComponent' 'GridSelectElementModule' 'GridStateService' 'QueryStatementHandler')
                path='@aurora'
        )
~}}
{{/unlessEq}}
{{#unlessEq (countGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push importsArray
        (object items='ViewChild' path='@angular/core')
~}}
{{
    push importsArray
        (
            object
                items=(array 'ColumnConfig' 'ColumnDataType' 'exportRows' 'GridColumnsConfigStorageService' 'GridData' 'GridFiltersStorageService' 'GridSelectMultipleElementsComponent' 'GridSelectMultipleElementsModule' 'GridState' 'GridStateService' 'Operator' 'QueryStatementHandler' 'SelectionChange' 'SelectionModel')
                path='@aurora'
        )
~}}
{{/unlessEq}}
{{#unlessEq (countGridElementsManagerWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push importsArray
        (object items='ViewChild' path='@angular/core')
~}}
{{
    push importsArray
        (object items='FormGroup' path='@angular/forms')
~}}
{{
    push importsArray
        (
            object
                items=(array 'ColumnConfig' 'ColumnDataType' 'exportRows' 'GridColumnsConfigStorageService' 'GridData' 'GridElementsManagerComponent' 'GridElementsManagerModule' 'GridFiltersStorageService' 'GridState' 'GridStateService' 'QueryStatementHandler')
                path='@aurora'
        )
~}}
{{/unlessEq}}
{{/unlessEq}}
{{! add imports for each components }}
{{#each (getWebComponentsProperties schema.aggregateProperties) }}
{{#eq (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) (toKebabCase ../schema.boundedContextName) }}
{{
    push ../importsArray
        (
            object
                items=(getAggregateNameFromPropertyRelationship relationship.modulePath)
                path=(sumStrings '../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '.types')
        )
        (
            object
                items=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
                path=(sumStrings '../' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)) '.service')
        )
~}}
{{else}}
{{
    push ../importsArray
        (
            object
                items=(getAggregateNameFromPropertyRelationship relationship.modulePath)
                path=(sumStrings '../../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '.types')
        )
        (
            object
                items=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
                path=(sumStrings '../../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)) '.service')
        )
~}}
{{/eq}}
{{/each}}
{{! add imports for each GridSelectElement components }}
{{#each (getGridSelectElementWebComponentsProperties schema.aggregateProperties) }}
{{#eq (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) (toKebabCase ../schema.boundedContextName) }}
{{
    push ../importsArray
        (
            object
                items=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'ColumnsConfig')
                path=(sumStrings '../' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)))
        )
~}}
{{else}}
{{ push ../importsArray
    (
        object
            items=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'ColumnsConfig')
            path=(sumStrings '../../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)))
    )
~}}
{{/eq}}
{{/each}}
{{! add imports for each GridElementsManager components }}
{{#each (getGridElementsManagerWebComponentsProperties schema.aggregateProperties) }}
{{#eq (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) (toKebabCase ../schema.boundedContextName) }}
{{
    push ../importsArray
        (
            object
                items=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'ColumnsConfig')
                path=(sumStrings '../' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)))
        )
~}}
{{else}}
{{
    push ../importsArray
        (
            object
                items=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'ColumnsConfig')
                path=(sumStrings '../../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '/' (toKebabCase (getModuleNameFromPropertyRelationship relationship.modulePath)))
        )
~}}
{{/eq}}
{{/each}}
{{! add imports for each GridSelectMultipleElementsWebComponents components }}
{{#each (getGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) }}
{{#eq (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) (toKebabCase ../schema.boundedContextName) }}
{{
    push ../importsArray
        (
            object
                items=relationship.pivot.aggregateName
                path=(sumStrings '../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '.types')
        )
~}}
{{else}}
{{
    push ../importsArray
        (
            object
                items=relationship.pivot.aggregateName
                path=(sumStrings '../../' (toKebabCase (getBoundedContextNameFromPropertyRelationship relationship.modulePath)) '.types')
        )
~}}
{{/eq}}
{{/each}}
{{#if (hasBooleanProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items='MatCheckboxModule' path='@angular/material/checkbox')
~}}
{{/if}}
{{#if (hasEnumProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items='MatSelectModule' path='@angular/material/select')
        (object items='NgForOf' path='@angular/common')
~}}
{{/if}}
{{#if (hasSelectWebComponentsProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items='MatSelectModule' path='@angular/material/select')
        (object items='NgForOf' path='@angular/common')
~}}
{{/if}}
{{#if (hasDateProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items='MatDatepickerModule' path='@angular/material/datepicker')
~}}
{{/if}}
{{#if (hasTimestampProperties schema.aggregateProperties) }}
{{
    push importsArray
        (object items='MtxDatetimepickerModule' path='@ng-matero/extensions/datetimepicker')
~}}
{{/if}}
{{{ importManager (object imports=importsArray) }}}
{{#each (getGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) }}
export const {{ toCamelCase relationship.pivot.moduleName }}GridId = '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase relationship.pivot.moduleName }}GridList';
export const {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId = '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridList';
{{#if @last}}

{{/if}}
{{/each}}
@Component({
    selector       : '{{ toKebabCase schema.boundedContextName }}-{{ toKebabCase schema.moduleName }}-detail',
    templateUrl    : './{{ toKebabCase schema.moduleName }}-detail.component.html',
    encapsulation  : ViewEncapsulation.None,
    changeDetection: ChangeDetectionStrategy.OnPush,
    standalone     : true,
    imports        : [
        ...defaultDetailImports,
        {{#if (hasImportWebComponentsManagerProperties (object properties=schema.aggregateProperties)) }}
        {{{ getImportWebComponentsManagerProperties (object properties=schema.aggregateProperties) }}}
        {{/if}}
    ],
})
export class {{ toPascalCase schema.moduleName }}DetailComponent extends ViewDetailComponent
{
    // ---- customizations ----
    // ..

    // Object retrieved from the database request,
    // it should only be used to obtain uninitialized
    // data in the form, such as relations, etc.
    // It should not be used habitually, since the source of truth is the form.
    managedObject: {{ schema.aggregateName }};
    {{#if (hasI18nProperties schema.aggregateProperties) }}
    currentLang: CoreLang;
    fallbackLang: CoreLang;
    {{/if}}
{{#unlessEq (countWebComponentsProperties schema.aggregateProperties) 0 }}

    // relationships
    {{#each (getWebComponentsProperties schema.aggregateProperties) }}
    {{#eq webComponent.type 'select'}}
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$: Observable<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}[]>;
    {{/eq}}
    {{#eq webComponent.type 'multiple-select'}}
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$: Observable<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}[]>;
    {{/eq}}
    {{#eq webComponent.type 'grid-select-element'}}
    /* #region variables to manage grid-select-element {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} */
    @ViewChild('{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}GridElementSelector') {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component: GridSelectElementComponent;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId: string = '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridList';
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridData$: Observable<GridData<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>>;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig$: Observable<ColumnConfig[]>;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}OriginColumnsConfig: ColumnConfig[] = [
        {
            type   : ColumnDataType.ACTIONS,
            field  : 'Actions',
            sticky : true,
            actions: row =>
            {
                return [
                    {
                        id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.select{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                        isViewAction: false,
                        translation : 'select',
                        icon        : 'add_link',
                    },
                ];
            },
        },
        ...{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig,
    ];
    /* #endregion variables to manage grid-select-element {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} */
    {{/eq}}
    {{#eq webComponent.type 'grid-select-multiple-elements'}}
    /* #region variables to manage grid-select-multiple-elements {{ toCamelCase ../schema.moduleNames }}-{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} */
    // {{ toCamelCase ../schema.moduleNames }}-{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-select-multiple-elements
    @ViewChild('{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridSelectMultipleElements') {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component: GridSelectMultipleElementsComponent;
    {{ toCamelCase relationship.pivot.moduleNames }}Ids: string[];
    {{ toCamelCase relationship.pivot.moduleName }}GridState: GridState = {};
    {{ toCamelCase relationship.pivot.moduleName }}SelectedRows: {{ relationship.pivot.aggregateName }}[] = [];
    {{ toCamelCase relationship.pivot.moduleName }}GridId = {{ toCamelCase relationship.pivot.moduleName }}GridId;
    {{ toCamelCase relationship.pivot.moduleName }}GridData$: Observable<GridData<{{ relationship.pivot.aggregateName }}>>;
    {{ toCamelCase relationship.pivot.moduleName }}ColumnsConfig$: Observable<ColumnConfig[]>;
    selectedCheckboxRowModel = new SelectionModel<any>(true, [], true, (a: {{ relationship.pivot.aggregateName }}, b: {{ relationship.pivot.aggregateName }}) => a.{{ toCamelCase relationship.singularName }}Id === b.{{ toCamelCase relationship.singularName }}Id);
    origin{{ toPascalCase relationship.pivot.moduleName }}ColumnsConfig: ColumnConfig[] = [
        {
            type   : ColumnDataType.ACTIONS,
            field  : 'actions',
            sticky : true,
            actions: row =>
            {
                const actions = [];

                actions.push({
                    id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.remove{{ toPascalCase relationship.pivot.moduleName }}',
                    isViewAction: false,
                    translation : 'unlink',
                    icon        : 'link_off',
                });

                return actions;
            },
        },
        {
            type       : ColumnDataType.CHECKBOX,
            field      : 'select',
            translation: 'Selects',
            sticky     : true,
        },
        ...{{ toCamelCase relationship.pivot.moduleName }}ColumnsConfig,
    ];

    // {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} dialog
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}SelectedRows: {{ relationship.aggregateName }}[] = [];
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId = {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridData$: Observable<GridData<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>>;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig$: Observable<ColumnConfig[]>;
    origin{{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig: ColumnConfig[] = [
        {
            type   : ColumnDataType.ACTIONS,
            field  : 'Actions',
            sticky : true,
            actions: row =>
            {
                const actions = [];

                if (this.{{ toCamelCase relationship.pivot.moduleNames }}Ids.includes(row.id))
                {
                    actions.push({
                        id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.noAction',
                        isViewAction: false,
                        translation : 'select',
                        icon        : 'done',
                    });
                }
                else
                {
                    actions.push({
                        id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.add{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                        isViewAction: false,
                        translation : 'select',
                        icon        : 'add_link',
                    });
                }

                return actions;
            },
        },
        {
            type       : ColumnDataType.CHECKBOX,
            field      : 'select',
            translation: 'Selects',
            sticky     : true,
        },
        ...{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig,
    ];
    /* #endregion variables to manage grid-select-multiple-elements {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} }} */
    {{/eq}}
    {{#eq webComponent.type 'grid-elements-manager'}}
    /* #region variables to manage grid-elements-manager {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} */
    @ViewChild('{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridElementsManager') {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component: GridElementsManagerComponent;
    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg: FormGroup;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId: string = '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridList';
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridData$: Observable<GridData<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>>;
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridState: GridState = {};
    {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig$: Observable<ColumnConfig[]>;
    origin{{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig: ColumnConfig[] = [
        {
            type   : ColumnDataType.ACTIONS,
            field  : 'Actions',
            sticky : true,
            actions: row =>
            {
                const actions = [
                    {
                        id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.edit{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                        isViewAction: false,
                        translation : 'edit',
                        icon        : 'mode_edit',
                    },
                    {
                        id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.delete{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                        isViewAction: false,
                        translation : 'delete',
                        icon        : 'delete',
                    },
                ];

                return actions;
            },
        },
        ...{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig,
    ];
    /* #endregion variables to manage grid-elements-manager {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} */
    {{/eq}}
    {{/each}}
{{/unlessEq}}

    // breadcrumb component definition
    breadcrumb: Crumb[] = [
        { translation: 'App' },
        { translation: '{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleNames }}', routerLink: ['/{{ toKebabCase schema.boundedContextName }}/{{ toKebabCase schema.moduleName }}']},
        { translation: '{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleName }}' },
    ];

    constructor(
{{
    setVar 'injectionsArray' (
        array
            (object variableName=(sumStrings (toCamelCase schema.moduleName) 'Service') className=(sumStrings (toPascalCase schema.moduleName) 'Service'))
    )
~}}
{{#if (hasI18nProperties schema.aggregateProperties) }}
{{
    push injectionsArray
        (object variableName='coreCurrentLangService' className='CoreCurrentLangService')
~}}
{{/if}}
{{#unlessEq (countGridSelectElementWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push injectionsArray
        (object variableName='gridColumnsConfigStorageService' className='GridColumnsConfigStorageService')
        (object variableName='gridFiltersStorageService' className='GridFiltersStorageService')
        (object variableName='gridStateService' className='GridStateService')
~}}
{{/unlessEq ~}}
{{#unlessEq (countGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push injectionsArray
        (object variableName='gridColumnsConfigStorageService' className='GridColumnsConfigStorageService')
        (object variableName='gridFiltersStorageService' className='GridFiltersStorageService')
        (object variableName='gridStateService' className='GridStateService')
~}}
{{/unlessEq ~}}
{{#unlessEq (countGridElementsManagerWebComponentsProperties schema.aggregateProperties) 0 }}
{{
    push injectionsArray
        (object variableName='gridColumnsConfigStorageService' className='GridColumnsConfigStorageService')
        (object variableName='gridFiltersStorageService' className='GridFiltersStorageService')
        (object variableName='gridStateService' className='GridStateService')
~}}
{{/unlessEq ~}}
{{#each (getWebComponentsProperties schema.aggregateProperties) }}
{{#eq webComponent.type 'select'}}
{{
    push ../injectionsArray
        (
            object variableName=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
            className=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
        )
~}}
{{/eq ~}}
{{#eq webComponent.type 'multiple-select'}}
{{
    push ../injectionsArray
        (
            object variableName=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
            className=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
        )
~}}
{{/eq ~}}
{{#eq webComponent.type 'grid-select-element'}}
{{
    push ../injectionsArray
        (
            object variableName=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
            className=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
        )
~}}
{{/eq ~}}
{{#eq webComponent.type 'grid-select-multiple-elements'}}
{{
    push ../injectionsArray
        (
            object variableName=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
            className=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
        )
        (
            object variableName=(sumStrings (toCamelCase relationship.pivot.moduleName) 'Service')
            className=(sumStrings (toPascalCase relationship.pivot.moduleName) 'Service')
        )
~}}
{{/eq ~}}
{{#eq webComponent.type 'grid-elements-manager'}}
{{
    push ../injectionsArray
        (
            object variableName=(sumStrings (toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
            className=(sumStrings (toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath)) 'Service')
        )
~}}
{{/eq ~}}
{{/each ~}}
{{{ constructorInjectorManager (object injections=injectionsArray) }}}
    )
    {
        super();
    }

    // this method will be called after the ngOnInit of
    // the parent class you can use instead of ngOnInit
    init(): void
    {
        /**/
        {{#each (getWebComponentsProperties schema.aggregateProperties) }}
        {{#eq webComponent.type 'select'}}
        this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$ = this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$;
        {{/eq}}
        {{#eq webComponent.type 'multiple-select'}}
        this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$ = this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}$;
        {{/eq}}
        {{#eq webComponent.type 'grid-select-element'}}
        // {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} grid-select-element
        this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig$ = this.gridColumnsConfigStorageService
            .getColumnsConfig(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId, this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}OriginColumnsConfig)
            .pipe(takeUntil(this.unsubscribeAll$));
        this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridData$ = this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service.pagination$;
        {{/eq}}
        {{/each}}
    }

    onSubmit($event): void
    {
        // we have two nested forms, we check that the submit comes from the button
        // that corresponds to the main form to the main form
        if ($event.submitter.getAttribute('form') !== $event.submitter.form.getAttribute('id'))
        {
            $event.preventDefault();
            $event.stopPropagation();
            return;
        }

        // manage validations before execute actions
        if (this.fg.invalid)
        {
            log('[DEBUG] Error to validate form: ', this.fg);
            this.validationMessagesService.validate();

            this.snackBar.openFromComponent(
                SnackBarInvalidFormComponent,
                {
                    data: {
                        message   : `${this.translocoService.translate('InvalidForm')}`,
                        textButton: `${this.translocoService.translate('InvalidFormOk')}`,
                    },
                    panelClass      : 'error-snackbar',
                    verticalPosition: 'top',
                    duration        : 10000,
                },
            );
            return;
        }

        this.actionService.action({
            id: mapActions(
                this.currentViewAction.id,
                {
                    '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.new' : '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.create',
                    '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.edit': '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.update',
                },
            ),
            isViewAction: false,
        });
    }

    createForm(): void
    {
        /* eslint-disable key-spacing */
        this.fg = this.fb.group({
            {{#each (getFormGroupFieldsProperties schema.aggregateProperties) }}
            {{#if (isAllowProperty ../schema.moduleName this) }}
            {{ toCamelCase (getPropertyName this) }}: {{#if (hasValidationFormControl .)}}[{{{initialFormGroupData .}}}, [{{#unless nullable }}Validators.required{{ hasCommaInValidationFormControl . 'nullable' }}{{/unless}}{{#if this.length }}Validators.minLength({{ this.length }}), Validators.maxLength({{ this.length }}){{ hasCommaInValidationFormControl . 'length' }}{{/if}}{{#if maxLength }}Validators.maxLength({{maxLength}}){{ hasCommaInValidationFormControl . 'maxLength' }}{{/if}}]]{{else}}{{{initialFormGroupData .}}}{{/if}},
            {{/if}}
            {{/each}}
        });
        /* eslint-enable key-spacing */
    }

    {{#if (hasI18nProperties schema.aggregateProperties) }}
    // disable fields when manage object
    // that language is not APP_FALLBACK_LANG
    disabledNotI18nFields(): void
    {
        {{#each (getFormGroupFieldsIsNotI18nProperties schema.aggregateProperties) }}
        this.fg.get('{{ toCamelCase (getPropertyName this) }}').disable();
        {{/each}}
    }

    {{/if}}
    {{#each (getGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) }}
    /* #region methods to manage {{ toPascalCase relationship.pivot.moduleNames }} grid */
    handlePermissionsRowsSectionChange($event: SelectionChange<IamPermissionRole>): void
    {
        this.{{ toCamelCase relationship.pivot.moduleName }}SelectedRows = $event.source.selected;
    }

    handleRemovePermissionsSelected(): void
    {
        if (this.{{ toCamelCase relationship.pivot.moduleName }}SelectedRows.length > 0)
        {
            this.actionService.action({
                id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.removePermissionsRoles',
                isViewAction: false,
                meta        : {
                    rows: this.{{ toCamelCase relationship.pivot.moduleName }}SelectedRows,
                },
            });
        }
    }
    /* #endregion methods to manage {{ toPascalCase relationship.pivot.moduleNames }} grid */

    /* #region methods to manage {{ toPascalCase name }} dialog */
    handleOpen{{ toPascalCase name }}Dialog(): void
    {
        this.actionService.action({
            id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase name }}Pagination',
            isViewAction: false,
            meta        : {
                query: QueryStatementHandler
                    .init({ columnsConfig: permissionColumnsConfig })
                    .setColumFilters(this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase name }}GridId))
                    .setSort(this.gridStateService.getSort(this.{{ toCamelCase name }}GridId))
                    .setPage(this.gridStateService.getPage(this.{{ toCamelCase name }}GridId))
                    .setSearch(this.gridStateService.getSearchState(this.{{ toCamelCase name }}GridId))
                    .getQueryStatement(),
            },
            afterRunAction: () =>
            {
                this.gridStateService.setPaginationActionId(this.{{ toCamelCase name }}GridId, '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase name }}Pagination');
                this.gridStateService.setExportActionId(this.{{ toCamelCase name }}GridId, '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.exportPermissions');
                this.{{ toCamelCase name }}Component.handleElementsDialog({
                    data: {
                        gridId   : this.{{ toCamelCase name }}GridId,
                        gridState: {
                            columnFilters: this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase name }}GridId),
                            page         : this.gridStateService.getPage(this.{{ toCamelCase name }}GridId),
                            sort         : this.gridStateService.getSort(this.{{ toCamelCase name }}GridId),
                            search       : this.gridStateService.getSearchState(this.{{ toCamelCase name }}GridId),
                        },
                    },
                });
            },
        });
    }

    handleDialog{{ toPascalCase name }}RowsSectionChange($event: SelectionChange<IamPermission>): void
    {
        this.{{ toCamelCase name }}SelectedRows = $event.source.selected;
    }

    handleAdd{{ toPascalCase name }}Selected(): void
    {
        if (this.{{ toCamelCase name }}SelectedRows.length > 0)
        {
            this.actionService.action({
                id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.addPermissionsRoles',
                isViewAction: false,
                meta        : {
                    rows: this.{{ toCamelCase name }}SelectedRows,
                },
            });

            this.{{ toCamelCase name }}Component.elementsDialogRef.close();
        }
    }
    /* #endregion methods to manage {{ toPascalCase name }} dialog */

    {{/each}}
    {{#each (getGridElementsManagerWebComponentsProperties schema.aggregateProperties) }}
    /* #region methods to manage {{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} */
    create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogForm(): void
    {
        /* eslint-disable key-spacing */
        this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg = this.fb.group({
            {{#each (getFormGroupFieldsProperties (getPropertiesFromPropertyRelationship relationship.modulePath)) as |formGroupFieldsProperty formGroupFieldsPropertyIndex| }}
            {{#if (isAllowProperty (getModuleNameFromPropertyRelationship ../relationship.modulePath) this) }}
            {{ toCamelCase (getPropertyName this) }}: {{#if (hasValidationFormControl .)}}[{{{initialFormGroupData .}}}, [{{#unless nullable }}Validators.required{{ hasCommaInValidationFormControl . 'nullable' }}{{/unless}}{{#if this.length }}Validators.minLength({{ this.length }}), Validators.maxLength({{ this.length }}){{ hasCommaInValidationFormControl . 'length' }}{{/if}}{{#if maxLength }}Validators.maxLength({{maxLength}}){{ hasCommaInValidationFormControl . 'maxLength' }}{{/if}}]]{{else}}{{{initialFormGroupData .}}}{{/if}},
            {{/if}}
            {{/each}}
        });
        /* eslint-enable key-spacing */
    }

    handleSubmit{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Form($event, dialog): void
    {
        // manage validations before execute actions
        if (this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.invalid)
        {
            log('[DEBUG] Error to validate form: ', this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg);
            this.validationMessagesService.validate();
            return;
        }

        // depending on the dialog action we invoke a create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} or update{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} action
        this.actionService.action({
            id: mapActions(
                dialog.componentInstance.data.currentActionId,
                {
                    '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.new{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}' : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                    '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.edit{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}': '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.update{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}',
                },
            ),
            isViewAction: false,
        });

        dialog.close();
    }
    /* #endregion methods to manage {{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} */

    {{/each}}
    async handleAction(action: Action): Promise<void>
    {
        // add optional chaining (?.) to avoid first call where behaviour subject is undefined
        switch (action?.id)
        {
            /* #region common actions */
            case '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.new':
                {{#unless (hasI18nProperties schema.aggregateProperties) }}
                this.fg.get('id').setValue(uuid());
                {{else}}
                this.currentLang = this.coreCurrentLangService.currentLang;

                // only when hasta id param, we are creating
                // a record with an alternative language
                if (this.activatedRoute.snapshot.paramMap.get('id'))
                {
                    this.{{ toCamelCase schema.moduleName }}Service
                        .{{ toCamelCase schema.moduleName }}$
                        .pipe(takeUntil(this.unsubscribeAll$))
                        .subscribe(item =>
                        {
                            this.managedObject = item;
                            this.fg.patchValue(item);
                            this.disabledNotI18nFields();
                        });
                }
                else
                {
                    // only when we create a record
                    // with default language
                    this.fg.get('id').setValue(uuid());
                }

                this.fg.get('langId').setValue(this.currentLang.id);
                {{/unless}}
                break;

            case '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.edit':
                {{#if (hasI18nProperties schema.aggregateProperties) }}
                this.currentLang = this.coreCurrentLangService.currentLang;
                this.fallbackLang = this.sessionService.get('fallbackLang');

                {{/if}}
                this.{{ toCamelCase schema.moduleName }}Service
                    .{{ toCamelCase schema.moduleName }}$
                    .pipe(takeUntil(this.unsubscribeAll$))
                    .subscribe(item =>
                    {
                        this.managedObject = item;
                        this.fg.patchValue(item);
                        {{#if (hasI18nProperties schema.aggregateProperties) }}
                        if (this.fallbackLang.id !== this.currentLang.id) this.disabledNotI18nFields();
                        {{/if}}
                        {{#each (getMultipleSelectWebComponentsProperties schema.aggregateProperties) }}

                        // set many to many {{ name }} associations
                        this.fg.get('{{ toCamelCase (getPropertyName this) }}').setValue(item.{{ name }}.map({{ toCamelCase relationship.singularName }} => {{ toCamelCase relationship.singularName }}.id));
                        {{/each}}
                    });
                {{#each (getGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) }}

                /* #region edit action to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements */
                // we need to get the {{ name }} of the {{ ../schema.moduleName }} to be able to
                // marked {{ name }} as selected in the dialog
                this.{{ toCamelCase relationship.pivot.moduleName }}Service
                    .{{ toCamelCase relationship.pivot.moduleNames }}$
                    .pipe(takeUntil(this.unsubscribeAll$))
                    .subscribe({{ toCamelCase relationship.pivot.moduleNames }} =>
                    {
                        this.{{ toCamelCase relationship.pivot.moduleNames }}Id = {{ toCamelCase relationship.pivot.moduleNames }}.map({{ toCamelCase relationship.pivot.moduleName }} => {{ toCamelCase relationship.pivot.moduleName }}.permissionId);
                    });

                // {{ name }} grid
                this.{{ toCamelCase relationship.pivot.moduleName }}ColumnsConfig$ = this.gridColumnsConfigStorageService
                    .getColumnsConfig(this.{{ toCamelCase relationship.pivot.moduleName }}GridId, this.origin{{ toPascalCase relationship.pivot.moduleName }}ColumnsConfig)
                    .pipe(takeUntil(this.unsubscribeAll$));

                this.{{ toCamelCase relationship.pivot.moduleName }}GridState = {
                    columnFilters: this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase relationship.pivot.moduleName }}GridId),
                    page         : this.gridStateService.getPage(this.{{ toCamelCase relationship.pivot.moduleName }}GridId),
                    sort         : this.gridStateService.getSort(this.{{ toCamelCase relationship.pivot.moduleName }}GridId),
                    search       : this.gridStateService.getSearchState(this.{{ toCamelCase relationship.pivot.moduleName }}GridId),
                };

                this.{{ toCamelCase relationship.pivot.moduleName }}GridData$ = this.{{ toCamelCase relationship.pivot.moduleName }}Service.pagination$;

                // {{ name }} grid
                this.{{ name }}ColumnsConfig$ = this.gridColumnsConfigStorageService
                    .getColumnsConfig(this.{{ name }}GridId, this.{{ name }}OriginColumnsConfig)
                    .pipe(takeUntil(this.unsubscribeAll$));
                this.{{ name }}GridData$ = this.permissionService.pagination$;
                /* #endregion edit action to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements */
                {{/each}}
                {{#each (getGridElementsManagerWebComponentsProperties schema.aggregateProperties) }}

                /* #region edit action to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-elements-manager */
                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig$ = this.gridColumnsConfigStorageService
                    .getColumnsConfig(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId, this.origin{{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}ColumnsConfig)
                    .pipe(takeUntil(this.unsubscribeAll$));

                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridState = {
                    columnFilters: this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    page         : this.gridStateService.getPage(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    sort         : this.gridStateService.getSort(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    search       : this.gridStateService.getSearchState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                };

                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridData$ = this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service.pagination$;

                // subscription to get {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} in edit {{ toCamelCase ../schema.moduleName }} action
                this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                    .{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}$
                    .pipe(takeUntil(this.unsubscribeAll$))
                    .subscribe(({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}: {{ getAggregateNameFromPropertyRelationship relationship.modulePath }}) =>
                    {
                        if ({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} && this.currentAction.id === '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.edit{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}')
                        {
                            this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.patchValue({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }});
                        }
                    });
                /* #endregion edit action to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-elements-manager */
                {{/each}}
                break;

            case '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.create':
                try
                {
                    await lastValueFrom(
                        this.{{ toCamelCase schema.moduleName }}Service
                            .create<{{ schema.aggregateName }}>({
                                {{#unless (hasI18nProperties schema.aggregateProperties) }}
                                object: this.fg.value,
                                {{else}}
                                // getRawValue to send disabled values
                                object : this.fg.getRawValue(),
                                headers: {
                                    'Content-Language': this.currentLang[this.sessionService.get('searchKeyLang')],
                                },
                                {{/unless}}
                            }),
                    );

                    this.snackBar.open(
                        `${this.translocoService.translate('{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleName }}')} ${this.translocoService.translate('Created.M')}`,
                        undefined,
                        {
                            verticalPosition: 'top',
                            duration        : 3000,
                        },
                    );

                    this.router.navigate(['{{ toKebabCase schema.boundedContextName }}/{{ toKebabCase schema.moduleName }}']);
                }
                catch(error)
                {
                    log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                }
                break;

            case '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.update':
                try
                {
                    await lastValueFrom(
                        this.{{ toCamelCase schema.moduleName }}Service
                            .updateById<{{ schema.aggregateName }}>({
                                {{#unless (hasI18nProperties schema.aggregateProperties) }}
                                object: this.fg.value,
                                {{else}}
                                // getRawValue to send disabled values
                                object : this.fg.getRawValue(),
                                headers: {
                                    'Content-Language': this.currentLang[this.sessionService.get('searchKeyLang')],
                                },
                                {{/unless}}
                            }),
                    );

                    this.snackBar.open(
                        `${this.translocoService.translate('{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleName }}')} ${this.translocoService.translate('Saved.M')}`,
                        undefined,
                        {
                            verticalPosition: 'top',
                            duration        : 3000,
                        },
                    );

                    this.router.navigate(['{{ toKebabCase schema.boundedContextName }}/{{ toKebabCase schema.moduleName }}']);
                }
                catch(error)
                {
                    log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                }
                break;
            {{#if (hasI18nProperties schema.aggregateProperties) }}

            case '{{ toCamelCase schema.boundedContextName }}::{{ toCamelCase schema.moduleName }}.detail.delete':
                const deleteDialogRef = this.confirmationService.open({
                    title  : `${this.translocoService.translate('DeleteTranslation')} ${this.translocoService.translate('Of').toLowerCase()} ${this.translocoService.translate('{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleName }}').toLowerCase()}`,
                    message: this.translocoService.translate('DeletionWarning', { entity: this.translocoService.translate('{{ toCamelCase schema.boundedContextName }}.{{ toPascalCase schema.moduleName }}') }),
                    icon   : {
                        show : true,
                        name : 'heroicons_outline:exclamation-triangle',
                        color: 'warn',
                    },
                    actions: {
                        confirm: {
                            show : true,
                            label: this.translocoService.translate('Remove'),
                            color: 'warn',
                        },
                        cancel: {
                            show : true,
                            label: this.translocoService.translate('Cancel'),
                        },
                    },
                    dismissible: true,
                });

                deleteDialogRef.afterClosed()
                    .subscribe(async result =>
                    {
                        if (result === 'confirmed')
                        {
                            try
                            {
                                await lastValueFrom(
                                    this.{{ toCamelCase schema.moduleName }}Service
                                        .deleteById<{{ schema.aggregateName }}>({
                                            id     : this.managedObject.id,
                                            headers: {
                                                'Content-Language': this.currentLang[this.sessionService.get('searchKeyLang')],
                                            },
                                        }),
                                );

                                this.router.navigate(['{{ toKebabCase schema.boundedContextName }}/{{ toKebabCase schema.moduleName }}']);
                            }
                            catch(error)
                            {
                                log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                            }
                        }
                    });
                break;
                {{/if}}
                /* #endregion common actions */
            {{#each (getGridSelectElementWebComponentsProperties schema.aggregateProperties) }}

            /* #region actions to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-select-element */
            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}OpenDialog':
                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component.gridState = {
                    columnFilters: this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    page         : this.gridStateService.getPage(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    sort         : this.gridStateService.getSort(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                    search       : this.gridStateService.getSearchState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId),
                };
                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component.openDialog();
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Pagination':
                await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .pagination({
                            query: action.meta.query ?
                                action.meta.query :
                                QueryStatementHandler
                                    .init({ columnsConfig: {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig })
                                    .setColumFilters(this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setSort(this.gridStateService.getSort(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setPage(this.gridStateService.getPage(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setSearch(this.gridStateService.getSearchState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .getQueryStatement(),
                        }),
                );
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.select{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }} = action.meta.row as {{ getAggregateNameFromPropertyRelationship relationship.modulePath }};

                this.fg.get('{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Id').setValue({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}.id);
                this.fg.get('{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Name').setValue({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}.name);
                this.fg.markAsDirty();

                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component.closeDialog();
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.export{{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}':
                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Rows = await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .get({
                            query     : action.meta.query,
                            constraint: { /**/ },
                        }),
                );

                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns: string[] = {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig.map({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnConfig => {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnConfig.field);
                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Headers = {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns.map(column => this.translocoService.translate('{{ toCamelCase ../schema.boundedContextName }}.' + column.toPascalCase()));

                exportRows(
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Rows.objects,
                    'order{{ toPascalCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}.' + action.meta.format,
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns,
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Headers,
                    action.meta.format,
                );
                break;
                /* #endregion actions to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-select-element */
            {{/each}}
            {{#each (getGridSelectMultipleElementsWebComponentsProperties schema.aggregateProperties) }}

            /* #region actions to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements grid */
            case 'iam::role.detail.addPermissionRole':
                await lastValueFrom(this.permissionRoleService.create({
                    object: {
                        permissionId: action.meta.row.id,
                        roleId      : this.managedObject.id,
                    },
                }));

                this.actionService.action({
                    id          : 'iam::role.detail.permissionsRolesPagination',
                    isViewAction: false,
                });

                // get all permissions roles from the role, to mark the permissions as selected when open permissions dialog
                this.actionService.action({
                    id            : 'iam::role.detail.getPermissionsRoles',
                    isViewAction  : false,
                    afterRunAction: () =>
                    {
                        this.actionService.action({
                            id          : 'iam::role.detail.permissionsPagination',
                            isViewAction: false,
                        });
                    },
                });

                this.snackBar.open(
                    `${this.translocoService.translate('iam.Permission')} ${this.translocoService.translate('Saved.M')}`,
                    undefined,
                    {
                        verticalPosition: 'top',
                        duration        : 3000,
                    },
                );
                break;

            case 'iam::role.detail.addPermissionsRoles':
                try
                {
                    await lastValueFrom(
                        this.permissionRoleService
                            .insert({
                                objects: action.meta.rows
                                    // avoid insert rows already inserted
                                    .filter(row => this.rolePermissionsId.indexOf(row.id) === -1)
                                    .map(row => ({
                                        permissionId: row.id,
                                        roleId      : this.managedObject.id,
                                    })),
                            }),
                    );

                    this.actionService.action({
                        id          : 'iam::role.detail.permissionsRolesPagination',
                        isViewAction: false,
                    });

                    // get all permissions roles from the role, to mark the permissions as selected when open permissions dialog
                    this.actionService.action({
                        id          : 'iam::role.detail.getPermissionsRoles',
                        isViewAction: false,
                    });

                    this.snackBar.open(
                        `${this.translocoService.translate('iam.Permissions')} ${this.translocoService.translate('Saved.M.P')}`,
                        undefined,
                        {
                            verticalPosition: 'top',
                            duration        : 3000,
                        },
                    );
                }
                catch(error)
                {
                    log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                }
                break;

            case 'iam::role.detail.removePermissionRole':
                await lastValueFrom(this.permissionRoleService.deleteById({
                    permissionId: action.meta.row.permissionId,
                    roleId      : this.managedObject.id,
                }));

                this.actionService.action({
                    id          : 'iam::role.detail.permissionsRolesPagination',
                    isViewAction: false,
                });

                this.actionService.action({
                    id          : 'iam::role.detail.getPermissionsRoles',
                    isViewAction: false,
                });

                this.snackBar.open(
                    `${this.translocoService.translate('iam.Permission')} ${this.translocoService.translate('Deleted.M')}`,
                    undefined,
                    {
                        verticalPosition: 'top',
                        duration        : 3000,
                    },
                );
                break;

            case 'iam::role.detail.permissionsRolesPagination':
                await lastValueFrom(
                    this.permissionRoleService
                        .pagination({
                            query: action.meta.query ?
                                action.meta.query :
                                QueryStatementHandler
                                    .init({ columnsConfig: permissionRoleColumnsConfig })
                                    .setColumFilters(this.gridFiltersStorageService.getColumnFilterState(this.permissionsRolesGridId))
                                    .setSort(this.gridStateService.getSort(this.permissionsRolesGridId))
                                    .setPage(this.gridStateService.getPage(this.permissionsRolesGridId))
                                    .setSearch(this.gridStateService.getSearchState(this.permissionsRolesGridId))
                                    .getQueryStatement(),
                            constraint: {
                                where: {
                                    roleId: this.managedObject.id,
                                },
                                include: [
                                    {
                                        association: 'permission',
                                    },
                                ],
                            },
                        }),
                );
                break;

            case 'iam::role.detail.getPermissionsRoles':
                await lastValueFrom(
                    this.permissionRoleService
                        .get({
                            query: {
                                where: {
                                    roleId: this.managedObject.id,
                                },
                            },
                        }),
                );
                break;

            case 'iam::role.detail.exportPermissionsRoles':
                const permissionRoleRows = await lastValueFrom(
                    this.permissionRoleService
                        .get({
                            graphqlStatement: getQueryExportPermissionsRoles,
                            query           : action.meta.query,
                            constraint      : {
                                where: {
                                    roleId: this.managedObject.id,
                                },
                                include: [
                                    {
                                        association: 'permission',
                                    },
                                ],
                            },
                        }),
                );

                const permissionRoleColumns: string[] = ['name'];
                const permissionRoleHeaders: string[] = [this.translocoService.translate('iam.permission')];

                exportRows(
                    permissionRoleRows.objects.map(row => row.permission),
                    'rolePermissions.' + action.meta.format,
                    permissionRoleColumns,
                    permissionRoleHeaders,
                    action.meta.format,
                );
                break;
                /* #endregion actions to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements grid */

            /* #region actions to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements dialog */
            case 'iam::role.detail.permissionsPagination':
                await lastValueFrom(
                    this.permissionService
                        .pagination({
                            query: action.meta.query ?
                                action.meta.query :
                                QueryStatementHandler
                                    .init({ columnsConfig: permissionColumnsConfig })
                                    .setColumFilters(this.gridFiltersStorageService.getColumnFilterState(this.permissionsGridId))
                                    .setSort(this.gridStateService.getSort(this.permissionsGridId))
                                    .setPage(this.gridStateService.getPage(this.permissionsGridId))
                                    .setSearch(this.gridStateService.getSearchState(this.permissionsGridId))
                                    .getQueryStatement(),
                        }),
                );
                break;

            case 'iam::role.detail.removePermissionsRoles':
                try
                {
                    await lastValueFrom(
                        this.permissionRoleService
                            .delete({
                                query: {
                                    where: {
                                        [Operator.or]: action.meta.rows
                                            .map(row => ({
                                                permissionId: row.permissionId,
                                                roleId      : this.managedObject.id,
                                            })),
                                    },
                                },
                            }),
                    );

                    this.selectedCheckboxRowModel.clear();

                    this.actionService.action({
                        id          : 'iam::role.detail.permissionsRolesPagination',
                        isViewAction: false,
                    });

                    // get all permissions roles from the role, to mark the permissions as selected when open permissions dialog
                    this.actionService.action({
                        id          : 'iam::role.detail.getPermissionsRoles',
                        isViewAction: false,
                    });

                    this.snackBar.open(
                        `${this.translocoService.translate('iam.Permissions')} ${this.translocoService.translate('Deleted.M.P')}`,
                        undefined,
                        {
                            verticalPosition: 'top',
                            duration        : 3000,
                        },
                    );
                }
                catch(error)
                {
                    log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                }
                break;

            case 'iam::role.detail.exportPermissions':
                const permissionRows = await lastValueFrom(
                    this.permissionService
                        .get({
                            query: action.meta.query,
                        }),
                );

                const permissionColumns: string[] = permissionColumnsConfig.map(permissionColumnConfig => permissionColumnConfig.field);
                const permissionHeaders = permissionColumns.map(column => this.translocoService.translate('iam.' + column.toPascalCase()));

                exportRows(
                    permissionRows.objects,
                    'permissions.' + action.meta.format,
                    permissionColumns,
                    permissionHeaders,
                    action.meta.format,
                );
                break;
                /* #endregion actions to manage {{ toPascalCase relationship.pivot.moduleNames }} grid-select-multiple-elements dialog */
            {{/each}}
            {{#each (getGridElementsManagerWebComponentsProperties schema.aggregateProperties) }}

            /* #region actions to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-elements-manager */
            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Pagination':
                await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .pagination({
                            query: action.meta.query ?
                                action.meta.query :
                                QueryStatementHandler
                                    .init({ columnsConfig: {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig })
                                    .setColumFilters(this.gridFiltersStorageService.getColumnFilterState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setSort(this.gridStateService.getSort(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setPage(this.gridStateService.getPage(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .setSearch(this.gridStateService.getSearchState(this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}GridId))
                                    .getQueryStatement(),
                            constraint: {
                                where: {
                                    {{ getForeignKey (object relationship=relationship schema=../schema) }}: this.managedObject.id,
                                },
                            },
                        }),
                );
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.new{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                this.create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogForm();
                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component.handleElementDetailDialog(action.id);
                this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.get('id').setValue(uuid());
                this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.get('{{ getForeignKey (object relationship=relationship schema=../schema) }}').setValue(this.managedObject.id);
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .create<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>({
                            object: this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.value,
                        }),
                );

                this.actionService.action({
                    id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Pagination',
                    isViewAction: false,
                });
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.edit{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                this.create{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogForm();
                await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .findById({
                            id        : action.meta.row.id,
                            constraint: {
                                where: {
                                    {{ getForeignKey (object relationship=relationship schema=../schema) }}: this.managedObject.id,
                                },
                            },
                        }),
                );
                this.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Component.handleElementDetailDialog(action.id);
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.update{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.removeControl('{{ getForeignKey (object relationship=relationship schema=../schema) }}');

                await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .updateById<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>({
                            object: this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogFg.value,
                        }),
                );
                this.actionService.action({
                    id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Pagination',
                    isViewAction: false,
                });
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.delete{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}':
                const delete{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogRef = this.confirmationService.open({
                    title  : `${this.translocoService.translate('Delete')} ${this.translocoService.translate('{{ toCamelCase ../schema.boundedContextName }}.{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}')}`,
                    message: this.translocoService.translate('DeletionWarning', { entity: this.translocoService.translate('{{ toCamelCase ../schema.boundedContextName }}.{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}') }),
                    icon   : {
                        show : true,
                        name : 'heroicons_outline:exclamation-triangle',
                        color: 'warn',
                    },
                    actions: {
                        confirm: {
                            show : true,
                            label: this.translocoService.translate('Remove'),
                            color: 'warn',
                        },
                        cancel: {
                            show : true,
                            label: this.translocoService.translate('Cancel'),
                        },
                    },
                    dismissible: true,
                });

                delete{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}DialogRef
                    .afterClosed()
                    .subscribe(async result =>
                    {
                        if (result === 'confirmed')
                        {
                            try
                            {
                                await lastValueFrom(
                                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                                        .deleteById<{{ getAggregateNameFromPropertyRelationship relationship.modulePath }}>({
                                            id: action.meta.row.id,
                                        }),
                                );

                                this.actionService.action({
                                    id          : '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}Pagination',
                                    isViewAction: false,
                                });
                            }
                            catch(error)
                            {
                                log(`[DEBUG] Catch error in ${action.id} action: ${error}`);
                            }
                        }
                    });
                break;

            case '{{ toCamelCase ../schema.boundedContextName }}::{{ toCamelCase ../schema.moduleName }}.detail.export{{ toPascalCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}s':
                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Rows = await lastValueFrom(
                    this.{{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Service
                        .get({
                            query     : action.meta.query,
                            constraint: {
                                where: {
                                    {{ getForeignKey (object relationship=relationship schema=../schema) }}: this.managedObject.id,
                                },
                            },
                        }),
                );

                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns: string[] = {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnsConfig.map({{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnConfig => {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}ColumnConfig.field);
                const {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Headers = {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns.map(column => this.translocoService.translate('{{ toCamelCase ../schema.boundedContextName }}.' + column.toPascalCase()));

                exportRows(
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Rows.objects,
                    '{{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }}.' + action.meta.format,
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Columns,
                    {{ toCamelCase (getModuleNameFromPropertyRelationship relationship.modulePath) }}Headers,
                    action.meta.format,
                );
                break;
                /* #endregion actions to manage {{ toCamelCase (getModuleNamesFromPropertyRelationship relationship.modulePath) }} grid-elements-manager */
            {{/each}}
        }
    }
}
